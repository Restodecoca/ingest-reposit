{"version":3,"sources":["../../src/widgets/index.tsx","../../src/widgets/chat-agent-events.tsx","../../src/ui/button.tsx","../../src/lib/utils.ts","../../src/ui/drawer.tsx","../../src/widgets/markdown.tsx","../../src/widgets/codeblock.tsx","../../src/hook/use-copy-to-clipboard.tsx","../../src/chat/annotation.ts","../../src/widgets/document-info.tsx","../../src/widgets/pdf-dialog.tsx","../../src/widgets/source-number-button.tsx","../../src/ui/icons/docx.tsx","../../src/ui/icons/pdf.tsx","../../src/ui/icons/sheet.tsx","../../src/ui/icons/txt.tsx","../../src/ui/progress.tsx","../../src/widgets/chat-events.tsx","../../src/ui/collapsible.tsx","../../src/widgets/chat-files.tsx","../../src/widgets/chat-image.tsx","../../src/widgets/chat-sources.tsx","../../src/widgets/suggested-questions.tsx","../../src/widgets/starter-questions.tsx","../../src/widgets/image-preview.tsx","../../src/widgets/file-uploader.tsx"],"sourcesContent":["// Other useful components\nexport { ChatAgentEvents } from './chat-agent-events'\nexport { ChatEvents } from './chat-events'\nexport { ChatFiles } from './chat-files'\nexport { ChatImage } from './chat-image'\nexport { ChatSources } from './chat-sources'\nexport { Markdown } from './markdown'\nexport { CodeBlock } from './codeblock'\nexport { PdfDialog } from './pdf-dialog'\nexport { SuggestedQuestions } from './suggested-questions'\nexport { StarterQuestions } from './starter-questions'\nexport { DocumentInfo } from './document-info'\nexport { ImagePreview } from './image-preview'\nexport { FileUploader } from './file-uploader'\n","import { icons, LucideIcon } from 'lucide-react'\nimport { useMemo } from 'react'\nimport { Button } from '../ui/button'\nimport {\n  Drawer,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerTitle,\n  DrawerTrigger,\n} from '../ui/drawer'\nimport { Markdown } from './markdown'\nimport { AgentEventData, ProgressData } from '../chat/annotation'\nimport { Progress } from '../ui/progress'\n\nconst AgentIcons: Record<string, LucideIcon> = {\n  bot: icons.Bot,\n  researcher: icons.ScanSearch,\n  writer: icons.PenLine,\n  reviewer: icons.MessageCircle,\n  publisher: icons.BookCheck,\n}\n\ntype StepText = {\n  text: string\n}\n\ntype StepProgress = {\n  text: string\n  progress: ProgressData\n}\n\ntype MergedEvent = {\n  agent: string\n  icon: LucideIcon\n  steps: (StepText | StepProgress)[]\n}\n\nexport function ChatAgentEvents({\n  data,\n  isFinished,\n}: {\n  data: AgentEventData[]\n  isFinished: boolean\n}) {\n  const events = useMemo(() => mergeAdjacentEvents(data), [data])\n  return (\n    <div className=\"pl-2\">\n      <div className=\"space-y-4 text-sm\">\n        {events.map((eventItem, index) => (\n          <AgentEventContent\n            key={index}\n            event={eventItem}\n            isLast={index === events.length - 1}\n            isFinished={isFinished}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nconst MAX_TEXT_LENGTH = 150\n\nfunction TextContent({ agent, step }: { agent: string; step: StepText }) {\n  const { displayText, showMore } = useMemo(\n    () => ({\n      displayText: step.text.slice(0, MAX_TEXT_LENGTH),\n      showMore: step.text.length > MAX_TEXT_LENGTH,\n    }),\n    [step.text]\n  )\n\n  return (\n    <div className=\"whitespace-break-spaces\">\n      {!showMore && <span>{step.text}</span>}\n      {showMore && (\n        <div>\n          <span>{displayText}...</span>\n          <AgentEventDialog content={step.text} title={`Agent \"${agent}\"`}>\n            <span className=\"ml-2 cursor-pointer font-semibold underline\">\n              Show more\n            </span>\n          </AgentEventDialog>\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction ProgressContent({ step }: { step: StepProgress }) {\n  const progressValue =\n    step.progress.total !== 0\n      ? Math.round(((step.progress.current + 1) / step.progress.total) * 100)\n      : 0\n\n  return (\n    <div className=\"mt-2 space-y-2\">\n      {step.text && (\n        <p className=\"text-muted-foreground text-sm\">{step.text}</p>\n      )}\n      <Progress value={progressValue} className=\"h-2 w-full\" />\n      <p className=\"text-muted-foreground text-sm\">\n        Processing {step.progress.current + 1} of {step.progress.total} steps...\n      </p>\n    </div>\n  )\n}\n\nfunction AgentEventContent({\n  event,\n  isLast,\n  isFinished,\n}: {\n  event: MergedEvent\n  isLast: boolean\n  isFinished: boolean\n}) {\n  const { agent, steps } = event\n  const AgentIcon = event.icon\n  const textSteps = steps.filter(step => !('progress' in step))\n  const progressSteps = steps.filter(\n    step => 'progress' in step\n  ) as StepProgress[]\n  // We only show progress at the last step\n  // TODO: once we support steps that work in parallel, we need to update this\n  const lastProgressStep =\n    progressSteps.length > 0\n      ? progressSteps[progressSteps.length - 1]\n      : undefined\n\n  return (\n    <div className=\"fadein-agent flex items-center gap-4 border-b pb-4\">\n      <div className=\"flex w-[100px] flex-col items-center gap-2\">\n        <div className=\"relative\">\n          {isLast && !isFinished && (\n            <div className=\"absolute -right-4 -top-0\">\n              <span className=\"relative flex h-3 w-3\">\n                <span className=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-sky-400 opacity-75\" />\n                <span className=\"relative inline-flex h-3 w-3 rounded-full bg-sky-500\" />\n              </span>\n            </div>\n          )}\n          <AgentIcon />\n        </div>\n        <span className=\"font-bold\">{agent}</span>\n      </div>\n      {textSteps.length > 0 && (\n        <div className=\"flex-1\">\n          <ul className=\"list-decimal space-y-2\">\n            {textSteps.map((step, index) => (\n              <li key={index}>\n                <TextContent agent={agent} step={step} />\n              </li>\n            ))}\n          </ul>\n          {lastProgressStep && !isFinished && (\n            <ProgressContent step={lastProgressStep} />\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n\ntype AgentEventDialogProps = {\n  title: string\n  content: string\n  children: React.ReactNode\n}\n\nfunction AgentEventDialog(props: AgentEventDialogProps) {\n  return (\n    <Drawer direction=\"left\">\n      <DrawerTrigger asChild>{props.children}</DrawerTrigger>\n      <DrawerContent className=\"mt-24 h-full max-h-[96%] w-3/5 \">\n        <DrawerHeader className=\"flex justify-between\">\n          <div className=\"space-y-2\">\n            <DrawerTitle>{props.title}</DrawerTitle>\n          </div>\n          <DrawerClose asChild>\n            <Button variant=\"outline\">Close</Button>\n          </DrawerClose>\n        </DrawerHeader>\n        <div className=\"m-4 overflow-auto\">\n          <Markdown content={props.content} />\n        </div>\n      </DrawerContent>\n    </Drawer>\n  )\n}\n\nfunction mergeAdjacentEvents(events: AgentEventData[]): MergedEvent[] {\n  const mergedEvents: MergedEvent[] = []\n\n  for (const event of events) {\n    const lastMergedEvent = mergedEvents[mergedEvents.length - 1]\n\n    const eventStep: StepText | StepProgress = event.data\n      ? ({\n          text: event.text,\n          progress: event.data,\n        } as StepProgress)\n      : ({\n          text: event.text,\n        } as StepText)\n\n    if (lastMergedEvent && lastMergedEvent.agent === event.agent) {\n      lastMergedEvent.steps.push(eventStep)\n    } else {\n      mergedEvents.push({\n        agent: event.agent,\n        steps: [eventStep],\n        icon: AgentIcons[event.agent.toLowerCase()] ?? icons.Bot,\n      })\n    }\n  }\n\n  return mergedEvents\n}\n","import { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport * as React from 'react'\nimport { cn } from '../lib/utils'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline:\n          'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button'\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\n","import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","'use client'\n\nimport * as React from 'react'\nimport { Drawer as DrawerPrimitive } from 'vaul'\nimport { cn } from '../lib/utils'\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = 'Drawer'\n\nconst DrawerTrigger: typeof DrawerPrimitive.Trigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal: typeof DrawerPrimitive.Portal = DrawerPrimitive.Portal\n\nconst DrawerClose: typeof DrawerPrimitive.Close = DrawerPrimitive.Close\n\nconst DrawerOverlay: typeof DrawerPrimitive.Overlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn('fixed inset-0 z-50 bg-black/80', className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent: typeof DrawerPrimitive.Content = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        'bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border',\n        className\n      )}\n      {...props}\n    >\n      <div className=\"bg-muted mx-auto mt-4 h-2 w-[100px] rounded-full\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = 'DrawerContent'\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn('grid gap-1.5 p-4 text-center sm:text-left', className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = 'DrawerHeader'\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn('mt-auto flex flex-col gap-2 p-4', className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = 'DrawerFooter'\n\nconst DrawerTitle: typeof DrawerPrimitive.Title = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      'text-lg font-semibold leading-none tracking-tight',\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription: typeof DrawerPrimitive.Description = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn('text-muted-foreground text-sm', className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerClose,\n  DrawerContent,\n  DrawerDescription,\n  DrawerFooter,\n  DrawerHeader,\n  DrawerOverlay,\n  DrawerPortal,\n  DrawerTitle,\n  DrawerTrigger,\n}\n","import { FC, memo } from 'react'\nimport ReactMarkdown, { Options } from 'react-markdown'\nimport rehypeKatex from 'rehype-katex'\nimport remarkGfm from 'remark-gfm'\nimport remarkMath from 'remark-math'\nimport { CodeBlock } from './codeblock'\nimport {\n  DOCUMENT_FILE_TYPES,\n  DocumentFileType,\n  SourceData,\n} from '../chat/annotation'\nimport { DocumentInfo } from './document-info'\nimport { SourceNumberButton } from './source-number-button'\n\nconst MemoizedReactMarkdown: FC<Options> = memo(\n  ReactMarkdown,\n  (prevProps, nextProps) =>\n    prevProps.children === nextProps.children &&\n    prevProps.className === nextProps.className\n)\n\nconst preprocessLaTeX = (content: string) => {\n  // Replace block-level LaTeX delimiters \\[ \\] with $$ $$\n  const blockProcessedContent = content.replace(\n    /\\\\\\[([\\s\\S]*?)\\\\\\]/g,\n    (_, equation) => `$$${equation}$$`\n  )\n  // Replace inline LaTeX delimiters \\( \\) with $ $\n  const inlineProcessedContent = blockProcessedContent.replace(\n    /\\\\\\[([\\s\\S]*?)\\\\\\]/g,\n    (_, equation) => `$${equation}$`\n  )\n  return inlineProcessedContent\n}\n\n/**\n * Update the citation flag [citation:id]() to the new format [citation:index](url)\n */\nconst preprocessCitations = (input: string, sources?: SourceData) => {\n  let content = input\n  if (sources) {\n    const citationRegex = /\\[citation:(.+?)\\]\\(\\)/g\n    let match\n    // Find all the citation references in the content\n    while ((match = citationRegex.exec(content)) !== null) {\n      const citationId = match[1]\n      // Find the source node with the id equal to the citation-id, also get the index of the source node\n      const sourceNode = sources.nodes.find(node => node.id === citationId)\n      // If the source node is found, replace the citation reference with the new format\n      if (sourceNode !== undefined) {\n        content = content.replace(\n          match[0],\n          `[citation:${sources.nodes.indexOf(sourceNode)}]()`\n        )\n      } else {\n        // If the source node is not found, remove the citation reference\n        content = content.replace(match[0], '')\n      }\n    }\n  }\n  return content\n}\n\nconst preprocessContent = (content: string, sources?: SourceData) => {\n  return preprocessCitations(preprocessLaTeX(content), sources)\n}\n\nexport function Markdown({\n  content,\n  sources,\n  backend,\n}: {\n  content: string\n  sources?: SourceData\n  backend?: string\n}) {\n  const processedContent = preprocessContent(content, sources)\n\n  return (\n    <div>\n      <MemoizedReactMarkdown\n        className=\"prose dark:prose-invert prose-p:leading-relaxed prose-pre:p-0 custom-markdown break-words\"\n        remarkPlugins={[remarkGfm, remarkMath]}\n        rehypePlugins={[rehypeKatex as any]}\n        components={{\n          p({ children }) {\n            return <div className=\"mb-2 last:mb-0\">{children}</div>\n          },\n          code({ inline, className, children, ...props }) {\n            if (children.length) {\n              if (children[0] === '▍') {\n                return (\n                  <span className=\"mt-1 animate-pulse cursor-default\">▍</span>\n                )\n              }\n\n              children[0] = (children[0] as string).replace('`▍`', '▍')\n            }\n\n            const match = /language-(\\w+)/.exec(className || '')\n\n            if (inline) {\n              return (\n                <code className={className} {...props}>\n                  {children}\n                </code>\n              )\n            }\n\n            return (\n              <CodeBlock\n                key={Math.random()}\n                language={(match && match[1]) || ''}\n                value={String(children).replace(/\\n$/, '')}\n                className=\"mb-2\"\n                {...props}\n              />\n            )\n          },\n          a({ href, children }) {\n            // If href starts with `{backend}/api/files`, then it's a local document and we use DocumenInfo for rendering\n            if (href?.startsWith(`${backend}/api/files`)) {\n              // Check if the file is document file type\n              const fileExtension = href.split('.').pop()?.toLowerCase()\n\n              if (\n                fileExtension &&\n                DOCUMENT_FILE_TYPES.includes(fileExtension as DocumentFileType)\n              ) {\n                return (\n                  <DocumentInfo\n                    document={{\n                      url: backend\n                        ? new URL(decodeURIComponent(href)).href\n                        : href,\n                      sources: [],\n                    }}\n                    className=\"mb-2 mt-2\"\n                  />\n                )\n              }\n            }\n            // If a text link starts with 'citation:', then render it as a citation reference\n            if (\n              Array.isArray(children) &&\n              typeof children[0] === 'string' &&\n              children[0].startsWith('citation:')\n            ) {\n              const index = Number(children[0].replace('citation:', ''))\n              if (!isNaN(index)) {\n                return <SourceNumberButton index={index} />\n              }\n              // citation is not looked up yet, don't render anything\n              return null\n            }\n            return (\n              <a href={href} target=\"_blank\" rel=\"noopener\">\n                {children}\n              </a>\n            )\n          },\n        }}\n      >\n        {processedContent}\n      </MemoizedReactMarkdown>\n    </div>\n  )\n}\n","import hljs from 'highlight.js'\nimport { Check, Copy, Download } from 'lucide-react'\nimport { FC, memo, useEffect, useRef } from 'react'\nimport { Button } from '../ui/button'\nimport { useCopyToClipboard } from '../hook/use-copy-to-clipboard'\n\ninterface Props {\n  language: string\n  value: string\n  className?: string\n}\n\ninterface languageMap {\n  [key: string]: string | undefined\n}\n\nexport const programmingLanguages: languageMap = {\n  javascript: '.js',\n  python: '.py',\n  java: '.java',\n  c: '.c',\n  cpp: '.cpp',\n  'c++': '.cpp',\n  'c#': '.cs',\n  ruby: '.rb',\n  php: '.php',\n  swift: '.swift',\n  'objective-c': '.m',\n  kotlin: '.kt',\n  typescript: '.ts',\n  go: '.go',\n  perl: '.pl',\n  rust: '.rs',\n  scala: '.scala',\n  haskell: '.hs',\n  lua: '.lua',\n  shell: '.sh',\n  sql: '.sql',\n  html: '.html',\n  css: '.css',\n  // add more file extensions here, make sure the key is same as language prop in CodeBlock.tsx component\n}\n\nexport const generateRandomString = (length: number, lowercase = false) => {\n  const chars = 'ABCDEFGHJKLMNPQRSTUVWXY3456789' // excluding similar looking characters like Z, 2, I, 1, O, 0\n  let result = ''\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length))\n  }\n  return lowercase ? result.toLowerCase() : result\n}\n\nconst CodeBlock: FC<Props> = memo(({ language, value, className }) => {\n  const { isCopied, copyToClipboard } = useCopyToClipboard({ timeout: 2000 })\n  const codeRef = useRef<HTMLElement>(null)\n\n  useEffect(() => {\n    if (codeRef.current && codeRef.current.dataset.highlighted !== 'yes') {\n      hljs.highlightElement(codeRef.current)\n    }\n  }, [language, value])\n\n  const downloadAsFile = () => {\n    if (typeof window === 'undefined') {\n      return\n    }\n    const fileExtension = programmingLanguages[language] || '.file'\n    const suggestedFileName = `file-${generateRandomString(\n      3,\n      true\n    )}${fileExtension}`\n    const fileName = window.prompt('Enter file name', suggestedFileName)\n\n    if (!fileName) {\n      // User pressed cancel on prompt.\n      return\n    }\n\n    const blob = new Blob([value], { type: 'text/plain' })\n    const url = URL.createObjectURL(blob)\n    const link = document.createElement('a')\n    link.download = fileName\n    link.href = url\n    link.style.display = 'none'\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    URL.revokeObjectURL(url)\n  }\n\n  const onCopy = () => {\n    if (isCopied) return\n    copyToClipboard(value)\n  }\n\n  return (\n    <div\n      className={`codeblock relative w-full bg-zinc-950 font-sans ${className}`}\n    >\n      <div className=\"flex w-full items-center justify-between bg-zinc-800 px-6 py-2 pr-4 text-zinc-100\">\n        <span className=\"text-xs lowercase\">{language}</span>\n        <div className=\"flex items-center space-x-1\">\n          <Button variant=\"ghost\" onClick={downloadAsFile} size=\"icon\">\n            <Download />\n            <span className=\"sr-only\">Download</span>\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onCopy}>\n            {isCopied ? (\n              <Check className=\"h-4 w-4\" />\n            ) : (\n              <Copy className=\"h-4 w-4\" />\n            )}\n            <span className=\"sr-only\">Copy code</span>\n          </Button>\n        </div>\n      </div>\n      <pre className=\"border border-zinc-700 text-white\">\n        <code ref={codeRef} className={`language-${language} font-mono`}>\n          {value}\n        </code>\n      </pre>\n    </div>\n  )\n})\nCodeBlock.displayName = 'CodeBlock'\n\nexport { CodeBlock }\n","'use client'\n\nimport * as React from 'react'\n\nexport interface UseCopyToClipboardProps {\n  timeout?: number\n}\n\nexport function useCopyToClipboard({\n  timeout = 2000,\n}: UseCopyToClipboardProps) {\n  const [isCopied, setIsCopied] = React.useState<boolean>(false)\n\n  const copyToClipboard = (value: string) => {\n    if (typeof window === 'undefined' || !navigator.clipboard?.writeText) {\n      return\n    }\n\n    if (!value) {\n      return\n    }\n\n    navigator.clipboard.writeText(value).then(() => {\n      setIsCopied(true)\n\n      setTimeout(() => {\n        setIsCopied(false)\n      }, timeout)\n    })\n  }\n\n  return { isCopied, copyToClipboard }\n}\n","export enum MessageAnnotationType {\n  IMAGE = 'image',\n  DOCUMENT_FILE = 'document_file',\n  SOURCES = 'sources',\n  EVENTS = 'events',\n  SUGGESTED_QUESTIONS = 'suggested_questions',\n  AGENT_EVENTS = 'agent',\n}\n\nexport type ImageData = {\n  url: string\n}\n\nexport type DocumentFileType = 'csv' | 'pdf' | 'txt' | 'docx'\nexport const DOCUMENT_FILE_TYPES: DocumentFileType[] = [\n  'csv',\n  'pdf',\n  'txt',\n  'docx',\n]\n\nexport type DocumentFile = {\n  id: string\n  name: string // The uploaded file name in the backend\n  size: number // The file size in bytes\n  type: DocumentFileType\n  url: string // The URL of the uploaded file in the backend\n  refs?: string[] // DocumentIDs of the uploaded file in the vector index\n}\n\nexport type DocumentFileData = {\n  files: DocumentFile[]\n}\n\nexport type SourceNode = {\n  id: string\n  metadata: Record<string, unknown>\n  score?: number\n  text: string\n  url: string\n}\n\nexport type SourceData = {\n  nodes: SourceNode[]\n}\n\nexport type EventData = {\n  title: string\n}\n\nexport type ProgressData = {\n  id: string\n  total: number\n  current: number\n}\n\nexport type AgentEventData = {\n  agent: string\n  text: string\n  type: 'text' | 'progress'\n  data?: ProgressData\n}\n\nexport type SuggestedQuestionsData = string[]\n\nexport type AnnotationData =\n  | ImageData\n  | DocumentFileData\n  | SourceData\n  | EventData\n  | AgentEventData\n  | SuggestedQuestionsData\n\nexport type MessageAnnotation = {\n  type: MessageAnnotationType\n  data: AnnotationData\n}\n\nconst NODE_SCORE_THRESHOLD = 0.25\n\nexport function getAnnotationData<T extends AnnotationData>(\n  annotations: MessageAnnotation[],\n  type: string\n): T[] {\n  if (!annotations?.length) return []\n  return annotations\n    .filter(a => a.type.toString() === type)\n    .map(a => a.data as T)\n}\n\nexport function getSourceAnnotationData(\n  annotations: MessageAnnotation[]\n): SourceData[] {\n  const data = getAnnotationData<SourceData>(\n    annotations,\n    MessageAnnotationType.SOURCES\n  )\n  if (data.length > 0) {\n    return [\n      {\n        ...data[0],\n        nodes: data[0].nodes ? preprocessSourceNodes(data[0].nodes) : [],\n      },\n    ]\n  }\n  return data\n}\n\nfunction preprocessSourceNodes(nodes: SourceNode[]): SourceNode[] {\n  // Filter source nodes has lower score\n  const processedNodes = nodes\n    .filter(node => (node.score ?? 1) > NODE_SCORE_THRESHOLD)\n    .filter(node => node.url && node.url.trim() !== '')\n    .sort((a, b) => (b.score ?? 1) - (a.score ?? 1))\n    .map(node => {\n      // remove trailing slash for node url if exists\n      node.url = node.url.replace(/\\/$/, '')\n      return node\n    })\n  return processedNodes\n}\n","import {\n  HoverCard,\n  HoverCardContent,\n  HoverCardTrigger,\n} from '@radix-ui/react-hover-card'\nimport { Check, Copy, FileIcon, XCircleIcon } from 'lucide-react'\nimport { DocumentFileType, SourceNode } from '../chat/annotation'\nimport { useCopyToClipboard } from '../hook/use-copy-to-clipboard'\nimport { Button } from '../ui/button'\nimport { PdfDialog } from './pdf-dialog'\nimport { SourceNumberButton } from './source-number-button'\n\nimport { cn } from '../lib/utils'\nimport { DocxIcon } from '../ui/icons/docx'\nimport { PDFIcon } from '../ui/icons/pdf'\nimport { SheetIcon } from '../ui/icons/sheet'\nimport { TxtIcon } from '../ui/icons/txt'\n\ntype Document = {\n  url: string\n  sources: SourceNode[]\n}\n\nexport function DocumentInfo({\n  document,\n  className,\n  onRemove,\n  startIndex = 0,\n}: {\n  document: Document\n  className?: string\n  onRemove?: () => void\n  startIndex?: number\n}) {\n  const { url, sources } = document\n  const urlParts = url.split('/')\n  const fileName = urlParts.length > 0 ? urlParts[urlParts.length - 1] : url\n  const fileExt = fileName?.split('.').pop() as DocumentFileType | undefined\n\n  const previewFile = {\n    name: fileName,\n    type: fileExt as DocumentFileType,\n  }\n\n  const DocumentDetail = (\n    <div className={`relative ${className}`}>\n      <DocumentPreviewCard\n        className=\"cursor-pointer\"\n        file={previewFile}\n        onRemove={onRemove}\n      />\n      <div className=\"absolute bottom-2 right-2 flex space-x-2\">\n        {sources.map((node: SourceNode, index: number) => (\n          <div key={node.id}>\n            <SourceInfo node={node} index={startIndex + index} />\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n\n  if (url.endsWith('.pdf')) {\n    // open internal pdf dialog for pdf files when click document card\n    return <PdfDialog documentId={url} url={url} trigger={DocumentDetail} />\n  }\n  // open external link when click document card for other file types\n  return <div onClick={() => window.open(url, '_blank')}>{DocumentDetail}</div>\n}\n\nfunction SourceInfo({ node, index }: { node?: SourceNode; index: number }) {\n  if (!node) return <SourceNumberButton index={index} />\n  return (\n    <HoverCard>\n      <HoverCardTrigger\n        className=\"cursor-default\"\n        onClick={e => {\n          e.preventDefault()\n          e.stopPropagation()\n        }}\n      >\n        <SourceNumberButton\n          index={index}\n          className=\"hover:bg-primary hover:text-white\"\n        />\n      </HoverCardTrigger>\n      <HoverCardContent className=\"w-[400px] bg-white p-4\">\n        <NodeInfo nodeInfo={node} />\n      </HoverCardContent>\n    </HoverCard>\n  )\n}\n\nfunction NodeInfo({ nodeInfo }: { nodeInfo: SourceNode }) {\n  const { isCopied, copyToClipboard } = useCopyToClipboard({ timeout: 1000 })\n\n  const pageNumber =\n    // XXX: page_label is used in Python, but page_number is used by Typescript\n    (nodeInfo.metadata?.page_number as number) ??\n    (nodeInfo.metadata?.page_label as number) ??\n    null\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <span className=\"font-semibold\">\n          {pageNumber ? `On page ${pageNumber}:` : 'Node content:'}\n        </span>\n        {nodeInfo.text && (\n          <Button\n            onClick={e => {\n              e.stopPropagation()\n              copyToClipboard(nodeInfo.text)\n            }}\n            size=\"icon\"\n            variant=\"ghost\"\n            className=\"h-12 w-12 shrink-0\"\n          >\n            {isCopied ? (\n              <Check className=\"h-4 w-4\" />\n            ) : (\n              <Copy className=\"h-4 w-4\" />\n            )}\n          </Button>\n        )}\n      </div>\n\n      {nodeInfo.text && (\n        <pre className=\"max-h-[200px] overflow-auto whitespace-pre-line\">\n          &ldquo;{nodeInfo.text}&rdquo;\n        </pre>\n      )}\n    </div>\n  )\n}\n\nconst FileIconMap: Record<DocumentFileType, React.ReactNode> = {\n  csv: <SheetIcon />,\n  pdf: <PDFIcon />,\n  docx: <DocxIcon />,\n  txt: <TxtIcon />,\n}\n\nfunction DocumentPreviewCard(props: {\n  file: {\n    name: string\n    size?: number\n    type: DocumentFileType\n  }\n  onRemove?: () => void\n  className?: string\n}) {\n  const { onRemove, file, className } = props\n  return (\n    <div\n      className={cn(\n        'bg-secondary relative w-60 max-w-60 rounded-lg p-2 text-sm',\n        className\n      )}\n    >\n      <div className=\"flex flex-row items-center gap-2\">\n        <div className=\"relative flex h-8 w-8 shrink-0 items-center justify-center overflow-hidden rounded-md\">\n          {FileIconMap[file.type] ?? <FileIcon />}\n        </div>\n        <div className=\"overflow-hidden\">\n          <div className=\"truncate font-semibold\">\n            {file.name} {file.size ? `(${inKB(file.size)} KB)` : ''}\n          </div>\n          {file.type && (\n            <div className=\"text-token-text-tertiary flex items-center gap-2 truncate\">\n              <span>{file.type.toUpperCase()} File</span>\n            </div>\n          )}\n        </div>\n      </div>\n      {onRemove && (\n        <div\n          className={cn(\n            'absolute -right-2 -top-2 z-10 h-6 w-6 rounded-full bg-gray-500 text-white'\n          )}\n        >\n          <XCircleIcon\n            className=\"h-6 w-6 rounded-full bg-gray-500 text-white\"\n            onClick={e => {\n              e.stopPropagation()\n              onRemove()\n            }}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction inKB(size: number) {\n  return Math.round((size / 1024) * 10) / 10\n}\n","import { lazy } from 'react'\nimport { Button } from '../ui/button'\nimport {\n  Drawer,\n  DrawerClose,\n  DrawerContent,\n  DrawerDescription,\n  DrawerHeader,\n  DrawerTitle,\n  DrawerTrigger,\n} from '../ui/drawer'\n\nconst PDFViewer = lazy(() =>\n  import('@llamaindex/pdf-viewer').then(m => ({ default: m.PDFViewer }))\n)\nconst PdfFocusProvider = lazy(() =>\n  import('@llamaindex/pdf-viewer').then(m => ({ default: m.PdfFocusProvider }))\n)\n\nexport interface PdfDialogProps {\n  documentId: string\n  url: string\n  trigger: React.ReactNode\n}\n\nexport function PdfDialog(props: PdfDialogProps) {\n  return (\n    <Drawer direction=\"left\">\n      <DrawerTrigger asChild>{props.trigger}</DrawerTrigger>\n      <DrawerContent className=\"mt-24 h-full max-h-[96%] w-3/5 \">\n        <DrawerHeader className=\"flex justify-between\">\n          <div className=\"space-y-2\">\n            <DrawerTitle>PDF Content</DrawerTitle>\n            <DrawerDescription>\n              File URL:{' '}\n              <a\n                className=\"hover:text-blue-900\"\n                href={props.url}\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                {props.url}\n              </a>\n            </DrawerDescription>\n          </div>\n          <DrawerClose asChild>\n            <Button variant=\"outline\">Close</Button>\n          </DrawerClose>\n        </DrawerHeader>\n        <div className=\"m-4\">\n          <PdfFocusProvider>\n            <PDFViewer\n              file={{\n                id: props.documentId,\n                url: props.url,\n              }}\n            />\n          </PdfFocusProvider>\n        </div>\n      </DrawerContent>\n    </Drawer>\n  )\n}\n","import { cn } from '../lib/utils'\n\nexport function SourceNumberButton({\n  index,\n  className,\n}: {\n  index: number\n  className?: string\n}) {\n  return (\n    <span\n      className={cn(\n        'inline-flex h-5 w-5 items-center justify-center rounded-full bg-gray-100 text-xs',\n        className\n      )}\n    >\n      {index + 1}\n    </span>\n  )\n}\n","import React from 'react'\n\ninterface DocxIconProps {\n  width?: number | string\n  height?: number | string\n  className?: string\n}\n\nexport const DocxIcon: React.FC<DocxIconProps> = ({\n  width = 40,\n  height = 40,\n  className,\n}) => {\n  return (\n    <svg\n      width={width}\n      height={height}\n      viewBox=\"-4 0 64 64\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <g fillRule=\"evenodd\">\n        <path\n          d=\"m5.11 0a5.07 5.07 0 0 0 -5.11 5v53.88a5.07 5.07 0 0 0 5.11 5.12h45.78a5.07 5.07 0 0 0 5.11-5.12v-38.6l-18.94-20.28z\"\n          fill=\"#107cad\"\n        />\n        <path\n          d=\"m56 20.35v1h-12.82s-6.31-1.26-6.13-6.71c0 0 .21 5.71 6 5.71z\"\n          fill=\"#084968\"\n        />\n        <path\n          d=\"m37.07 0v14.56a5.78 5.78 0 0 0 6.11 5.79h12.82z\"\n          fill=\"#90d0fe\"\n          opacity=\".5\"\n        />\n      </g>\n      <path\n        d=\"m14.24 53.86h-3a1.08 1.08 0 0 1 -1.08-1.08v-9.85a1.08 1.08 0 0 1 1.08-1.08h3a6 6 0 1 1 0 12zm0-10.67h-2.61v9.34h2.61a4.41 4.41 0 0 0 4.61-4.66 4.38 4.38 0 0 0 -4.61-4.68zm14.42 10.89a5.86 5.86 0 0 1 -6-6.21 6 6 0 1 1 11.92 0 5.87 5.87 0 0 1 -5.92 6.21zm0-11.09c-2.7 0-4.41 2.07-4.41 4.88s1.71 4.88 4.41 4.88 4.41-2.09 4.41-4.88-1.72-4.87-4.41-4.87zm18.45.38a.75.75 0 0 1 .2.52.71.71 0 0 1 -.7.72.64.64 0 0 1 -.51-.24 4.06 4.06 0 0 0 -3-1.38 4.61 4.61 0 0 0 -4.63 4.88 4.63 4.63 0 0 0 4.63 4.88 4 4 0 0 0 3-1.37.7.7 0 0 1 .51-.24.72.72 0 0 1 .7.74.78.78 0 0 1 -.2.51 5.33 5.33 0 0 1 -4 1.69 6.22 6.22 0 0 1 0-12.43 5.26 5.26 0 0 1 4 1.72z\"\n        fill=\"#ffffff\"\n      />\n    </svg>\n  )\n}\n","import React from 'react'\n\ninterface PDFIconProps {\n  className?: string\n  width?: number | string\n  height?: number | string\n}\n\nexport const PDFIcon: React.FC<PDFIconProps> = ({\n  className,\n  width = 40,\n  height = 40,\n}) => {\n  return (\n    <svg\n      width={width}\n      height={height}\n      version=\"1.1\"\n      id=\"Layer_1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 309.267 309.267\"\n      className={className}\n    >\n      <g>\n        <path\n          style={{ fill: '#E2574C' }}\n          d=\"M38.658,0h164.23l87.049,86.711v203.227c0,10.679-8.659,19.329-19.329,19.329H38.658\n            c-10.67,0-19.329-8.65-19.329-19.329V19.329C19.329,8.65,27.989,0,38.658,0z\"\n        />\n        <path\n          style={{ fill: '#B53629' }}\n          d=\"M289.658,86.981h-67.372c-10.67,0-19.329-8.659-19.329-19.329V0.193L289.658,86.981z\"\n        />\n        <path\n          style={{ fill: '#FFFFFF' }}\n          d=\"M217.434,146.544c3.238,0,4.823-2.822,4.823-5.557c0-2.832-1.653-5.567-4.823-5.567h-18.44\n            c-3.605,0-5.615,2.986-5.615,6.282v45.317c0,4.04,2.3,6.282,5.412,6.282c3.093,0,5.403-2.242,5.403-6.282v-12.438h11.153\n            c3.46,0,5.19-2.832,5.19-5.644c0-2.754-1.73-5.49-5.19-5.49h-11.153v-16.903C204.194,146.544,217.434,146.544,217.434,146.544z\n            M155.107,135.42h-13.492c-3.663,0-6.263,2.513-6.263,6.243v45.395c0,4.629,3.74,6.079,6.417,6.079h14.159\n            c16.758,0,27.824-11.027,27.824-28.047C183.743,147.095,173.325,135.42,155.107,135.42z M155.755,181.946h-8.225v-35.334h7.413\n            c11.221,0,16.101,7.529,16.101,17.918C171.044,174.253,166.25,181.946,155.755,181.946z M106.33,135.42H92.964\n            c-3.779,0-5.886,2.493-5.886,6.282v45.317c0,4.04,2.416,6.282,5.663,6.282s5.663-2.242,5.663-6.282v-13.231h8.379\n            c10.341,0,18.875-7.326,18.875-19.107C125.659,143.152,117.425,135.42,106.33,135.42z M106.108,163.158h-7.703v-17.097h7.703\n            c4.755,0,7.78,3.711,7.78,8.553C113.878,159.447,110.863,163.158,106.108,163.158z\"\n        />\n      </g>\n    </svg>\n  )\n}\n","import React from 'react'\n\nexport const SheetIcon: React.FC = () => (\n  <svg\n    width=\"49px\"\n    height=\"67px\"\n    viewBox=\"0 0 49 67\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <title>Sheets-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n      <path\n        d=\"M29.5833333,0 L4.4375,0 C1.996875,0 0,1.996875 0,4.4375 L0,60.6458333 C0,63.0864583 1.996875,65.0833333 4.4375,65.0833333 L42.8958333,65.0833333 C45.3364583,65.0833333 47.3333333,63.0864583 47.3333333,60.6458333 L47.3333333,17.75 L29.5833333,0 Z\"\n        id=\"path-1\"\n      />\n      <linearGradient\n        x1=\"50.0053945%\"\n        y1=\"8.58610612%\"\n        x2=\"50.0053945%\"\n        y2=\"100.013939%\"\n        id=\"linearGradient-7\"\n      >\n        <stop stopColor=\"#263238\" stopOpacity=\"0.2\" offset=\"0%\" />\n        <stop stopColor=\"#263238\" stopOpacity=\"0.02\" offset=\"100%\" />\n      </linearGradient>\n      <radialGradient\n        cx=\"3.16804688%\"\n        cy=\"2.71744318%\"\n        fx=\"3.16804688%\"\n        fy=\"2.71744318%\"\n        r=\"161.248516%\"\n        gradientTransform=\"translate(0.031680,0.027174),scale(1.000000,0.727273),translate(-0.031680,-0.027174)\"\n        id=\"radialGradient-16\"\n      >\n        <stop stopColor=\"#FFFFFF\" stopOpacity=\"0.1\" offset=\"0%\" />\n        <stop stopColor=\"#FFFFFF\" stopOpacity=\"0\" offset=\"100%\" />\n      </radialGradient>\n    </defs>\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g\n        id=\"Consumer-Apps-Sheets-Large-VD-R8-\"\n        transform=\"translate(-451.000000, -451.000000)\"\n      >\n        <g id=\"Hero\" transform=\"translate(0.000000, 63.000000)\">\n          <g id=\"Personal\" transform=\"translate(277.000000, 299.000000)\">\n            <g id=\"Sheets-icon\" transform=\"translate(174.833333, 89.958333)\">\n              <g id=\"Group\">\n                <g id=\"Clipped\">\n                  <mask id=\"mask-2\" fill=\"white\">\n                    <use xlinkHref=\"#path-1\" />\n                  </mask>\n                  <path\n                    d=\"M29.5833333,0 L4.4375,0 C1.996875,0 0,1.996875 0,4.4375 L0,60.6458333 C0,63.0864583 1.996875,65.0833333 4.4375,65.0833333 L42.8958333,65.0833333 C45.3364583,65.0833333 47.3333333,63.0864583 47.3333333,60.6458333 L47.3333333,17.75 L36.9791667,10.3541667 L29.5833333,0 Z\"\n                    id=\"Path\"\n                    fill=\"#0F9D58\"\n                    fillRule=\"nonzero\"\n                    mask=\"url(#mask-2)\"\n                  />\n                </g>\n                <g id=\"Clipped\">\n                  <mask id=\"mask-4\" fill=\"white\">\n                    <use xlinkHref=\"#path-1\" />\n                  </mask>\n                  <path\n                    d=\"M11.8333333,31.8020833 L11.8333333,53.25 L35.5,53.25 L35.5,31.8020833 L11.8333333,31.8020833 Z M22.1875,50.2916667 L14.7916667,50.2916667 L14.7916667,46.59375 L22.1875,46.59375 L22.1875,50.2916667 Z M22.1875,44.375 L14.7916667,44.375 L14.7916667,40.6770833 L22.1875,40.6770833 L22.1875,44.375 Z M22.1875,38.4583333 L14.7916667,38.4583333 L14.7916667,34.7604167 L22.1875,34.7604167 L22.1875,38.4583333 Z M32.5416667,50.2916667 L25.1458333,50.2916667 L25.1458333,46.59375 L32.5416667,46.59375 L32.5416667,50.2916667 Z M32.5416667,44.375 L25.1458333,44.375 L25.1458333,40.6770833 L32.5416667,40.6770833 L32.5416667,44.375 Z M32.5416667,38.4583333 L25.1458333,38.4583333 L25.1458333,34.7604167 L32.5416667,34.7604167 L32.5416667,38.4583333 Z\"\n                    id=\"Shape\"\n                    fill=\"#F1F1F1\"\n                    fillRule=\"nonzero\"\n                    mask=\"url(#mask-4)\"\n                  />\n                </g>\n                <g id=\"Clipped\">\n                  <mask id=\"mask-6\" fill=\"white\">\n                    <use xlinkHref=\"#path-1\" />\n                  </mask>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"url(#linearGradient-7)\"\n                    fillRule=\"nonzero\"\n                    mask=\"url(#mask-6)\"\n                    points=\"30.8813021 16.4520313 47.3333333 32.9003646 47.3333333 17.75\"\n                  />\n                </g>\n                <g id=\"Clipped\">\n                  <mask id=\"mask-9\" fill=\"white\">\n                    <use xlinkHref=\"#path-1\" />\n                  </mask>\n                  <g id=\"Group\" mask=\"url(#mask-9)\">\n                    <g transform=\"translate(26.625000, -2.958333)\">\n                      <path\n                        d=\"M2.95833333,2.95833333 L2.95833333,16.2708333 C2.95833333,18.7225521 4.94411458,20.7083333 7.39583333,20.7083333 L20.7083333,20.7083333 L2.95833333,2.95833333 Z\"\n                        id=\"Path\"\n                        fill=\"#87CEAC\"\n                        fillRule=\"nonzero\"\n                      />\n                    </g>\n                  </g>\n                </g>\n                <g id=\"Clipped\">\n                  <mask id=\"mask-11\" fill=\"white\">\n                    <use xlinkHref=\"#path-1\" />\n                  </mask>\n                  <path\n                    d=\"M4.4375,0 C1.996875,0 0,1.996875 0,4.4375 L0,4.80729167 C0,2.36666667 1.996875,0.369791667 4.4375,0.369791667 L29.5833333,0.369791667 L29.5833333,0 L4.4375,0 Z\"\n                    id=\"Path\"\n                    fillOpacity=\"0.2\"\n                    fill=\"#FFFFFF\"\n                    fillRule=\"nonzero\"\n                    mask=\"url(#mask-11)\"\n                  />\n                </g>\n                <g id=\"Clipped\">\n                  <mask id=\"mask-13\" fill=\"white\">\n                    <use xlinkHref=\"#path-1\" />\n                  </mask>\n                  <path\n                    d=\"M42.8958333,64.7135417 L4.4375,64.7135417 C1.996875,64.7135417 0,62.7166667 0,60.2760417 L0,60.6458333 C0,63.0864583 1.996875,65.0833333 4.4375,65.0833333 L42.8958333,65.0833333 C45.3364583,65.0833333 47.3333333,63.0864583 47.3333333,60.6458333 L47.3333333,25.1666667 L42.8958333,21.0208333 L42.8958333,64.7135417 Z\"\n                    id=\"Path\"\n                    fill=\"url(#radialGradient-16)\"\n                    fillRule=\"nonzero\"\n                    mask=\"url(#mask-13)\"\n                  />\n                </g>\n              </g>\n            </g>\n          </g>\n        </g>\n      </g>\n    </g>\n  </svg>\n)\n","import React from 'react'\n\ninterface TxtIconProps {\n  className?: string\n  width?: number | string\n  height?: number | string\n}\n\nexport const TxtIcon: React.FC<TxtIconProps> = ({\n  className,\n  width = 40,\n  height = 40,\n}) => {\n  return (\n    <svg\n      width={width}\n      height={height}\n      version=\"1.1\"\n      id=\"Layer_1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 512 512\"\n      className={className}\n    >\n      <path\n        style={{ fill: '#E2E5E7' }}\n        d=\"M128,0c-17.6,0-32,14.4-32,32v448c0,17.6,14.4,32,32,32h320c17.6,0,32-14.4,32-32V128L352,0H128z\"\n      />\n      <path\n        style={{ fill: '#B0B7BD' }}\n        d=\"M384,128h96L352,0v96C352,113.6,366.4,128,384,128z\"\n      />\n      <polygon style={{ fill: '#CAD1D8' }} points=\"480,224 384,128 480,128 \" />\n      <path\n        style={{ fill: '#576D7E' }}\n        d=\"M416,416c0,8.8-7.2,16-16,16H48c-8.8,0-16-7.2-16-16V256c0-8.8,7.2-16,16-16h352c8.8,0,16,7.2,16,16V416z\"\n      />\n      <g>\n        <path\n          style={{ fill: '#FFFFFF' }}\n          d=\"M132.784,311.472H110.4c-11.136,0-11.136-16.368,0-16.368h60.512c11.392,0,11.392,16.368,0,16.368h-21.248v64.592c0,11.12-16.896,11.392-16.896,0v-64.592H132.784z\"\n        />\n        <path\n          style={{ fill: '#FFFFFF' }}\n          d=\"M224.416,326.176l22.272-27.888c6.656-8.688,19.568,2.432,12.288,10.752c-7.68,9.088-15.728,18.944-23.424,29.024l26.112,32.496c7.024,9.6-7.04,18.816-13.952,9.344l-23.536-30.192l-23.152,30.832c-6.528,9.328-20.992-1.152-13.68-9.856l25.696-32.624c-8.048-10.096-15.856-19.936-23.664-29.024c-8.064-9.6,6.912-19.44,12.784-10.48L224.416,326.176z\"\n        />\n        <path\n          style={{ fill: '#FFFFFF' }}\n          d=\"M298.288,311.472H275.92c-11.136,0-11.136-16.368,0-16.368h60.496c11.392,0,11.392,16.368,0,16.368h-21.232v64.592c0,11.12-16.896,11.392-16.896,0V311.472z\"\n        />\n      </g>\n      <path\n        style={{ fill: '#CAD1D8' }}\n        d=\"M400,432H96v16h304c8.8,0,16-7.2,16-16v-16C416,424.8,408.8,432,400,432z\"\n      />\n    </svg>\n  )\n}\n","'use client'\n\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\nimport * as React from 'react'\nimport { cn } from '../lib/utils'\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      'bg-secondary relative h-4 w-full overflow-hidden rounded-full',\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"bg-primary h-full w-full flex-1 transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","import { ChevronDown, ChevronRight, Loader2 } from 'lucide-react'\nimport { useState } from 'react'\nimport { Button } from '../ui/button'\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '../ui/collapsible'\nimport { EventData } from '../chat/annotation'\n\nexport function ChatEvents({\n  data,\n  showLoading,\n}: {\n  data: EventData[]\n  showLoading: boolean\n}) {\n  const [isOpen, setIsOpen] = useState(false)\n\n  const buttonLabel = isOpen ? 'Hide events' : 'Show events'\n\n  const EventIcon = isOpen ? (\n    <ChevronDown className=\"h-4 w-4\" />\n  ) : (\n    <ChevronRight className=\"h-4 w-4\" />\n  )\n\n  return (\n    <div className=\"border-l-2 border-indigo-400 pl-2\">\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <CollapsibleTrigger asChild>\n          <Button variant=\"secondary\" className=\"space-x-2\">\n            {showLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : null}\n            <span>{buttonLabel}</span>\n            {EventIcon}\n          </Button>\n        </CollapsibleTrigger>\n        <CollapsibleContent asChild>\n          <div className=\"mt-4 space-y-2 text-sm\">\n            {data.map((eventItem, index) => (\n              <div className=\"whitespace-break-spaces\" key={index}>\n                {eventItem.title}\n              </div>\n            ))}\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n  )\n}\n","'use client'\n\nimport * as CollapsiblePrimitive from '@radix-ui/react-collapsible'\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleContent, CollapsibleTrigger }\n","import { DocumentFileData } from '../chat/annotation'\nimport { DocumentInfo } from './document-info'\n\nexport function ChatFiles({ data }: { data: DocumentFileData }) {\n  if (!data.files.length) return null\n  return (\n    <div className=\"flex items-center gap-2\">\n      {data.files.map(file => (\n        <DocumentInfo\n          key={file.id}\n          document={{ url: file.url, sources: [] }}\n          className=\"mb-2 mt-2\"\n        />\n      ))}\n    </div>\n  )\n}\n","import { type ImageData } from '../index'\n\nexport function ChatImage({ data }: { data: ImageData }) {\n  return (\n    <div className=\"max-w-[200px] rounded-md shadow-md\">\n      <img src={data.url} alt=\"chat_image\" className=\"h-auto w-full\" />\n    </div>\n  )\n}\n","import { useMemo } from 'react'\nimport { SourceData, SourceNode } from '../chat/annotation'\nimport { DocumentInfo } from './document-info'\n\ntype Document = {\n  url: string\n  sources: SourceNode[]\n}\n\nexport function ChatSources({ data }: { data: SourceData }) {\n  const documents: Document[] = useMemo(() => {\n    // group nodes by document (a document must have a URL)\n    const nodesByUrl: Record<string, SourceNode[]> = {}\n    data.nodes.forEach(node => {\n      const key = node.url\n      nodesByUrl[key] ??= []\n      nodesByUrl[key].push(node)\n    })\n\n    // convert to array of documents\n    return Object.entries(nodesByUrl).map(([url, sources]) => ({\n      url,\n      sources,\n    }))\n  }, [data.nodes])\n\n  if (documents.length === 0) return null\n\n  return (\n    <div className=\"space-y-2 text-sm\">\n      <div className=\"text-lg font-semibold\">Sources:</div>\n      <div className=\"flex flex-wrap gap-3\">\n        {documents.map((document, index) => {\n          const startIndex = documents\n            .slice(0, index)\n            .reduce((acc, doc) => acc + doc.sources.length, 0)\n          return (\n            <DocumentInfo\n              key={document.url}\n              document={document}\n              startIndex={startIndex}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n","import { SuggestedQuestionsData } from '../chat/annotation'\nimport { ChatHandler } from '../chat/chat.interface'\n\nexport function SuggestedQuestions({\n  questions,\n  append,\n}: {\n  questions: SuggestedQuestionsData\n  append: ChatHandler['append']\n}) {\n  const showQuestions = questions.length > 0\n  return (\n    showQuestions && (\n      <div className=\"flex flex-col space-y-2\">\n        {questions.map((question, index) => (\n          <a\n            key={index}\n            onClick={() => {\n              append({ role: 'user', content: question })\n            }}\n            className=\"cursor-pointer text-sm italic hover:underline\"\n          >\n            {'->'} {question}\n          </a>\n        ))}\n      </div>\n    )\n  )\n}\n","import { ChatHandler } from '../chat/chat.interface'\nimport { Button } from '../ui/button'\n\ninterface StarterQuestionsProps {\n  questions: string[]\n  append: ChatHandler['append']\n}\n\nexport function StarterQuestions(props: StarterQuestionsProps) {\n  return (\n    <div className=\"absolute bottom-6 left-0 w-full\">\n      <div className=\"mx-20 grid grid-cols-2 gap-2\">\n        {props.questions.map((question, i) => (\n          <Button\n            key={i}\n            variant=\"outline\"\n            onClick={() => props.append({ role: 'user', content: question })}\n          >\n            {question}\n          </Button>\n        ))}\n      </div>\n    </div>\n  )\n}\n","import { XCircleIcon } from 'lucide-react'\nimport { cn } from '../lib/utils'\n\nexport function ImagePreview({\n  url,\n  onRemove,\n}: {\n  url: string\n  onRemove: () => void\n}) {\n  return (\n    <div className=\"group relative h-20 w-20\">\n      <img\n        src={url}\n        alt=\"uploaded_image\"\n        className=\"h-full w-full rounded-xl object-cover hover:brightness-75\"\n      />\n      <div\n        className={cn(\n          'absolute -right-2 -top-2 z-10 hidden h-6 w-6 rounded-full bg-gray-500 text-white group-hover:block'\n        )}\n      >\n        <XCircleIcon\n          className=\"h-6 w-6 rounded-full bg-gray-500 text-white\"\n          onClick={onRemove}\n        />\n      </div>\n    </div>\n  )\n}\n","import { Loader2, Paperclip } from 'lucide-react'\nimport { ChangeEvent, useState } from 'react'\nimport { buttonVariants } from '../ui/button'\nimport { cn } from '../lib/utils'\n\nexport interface FileUploaderProps {\n  config?: {\n    inputId?: string\n    fileSizeLimit?: number\n    allowedExtensions?: string[]\n    checkExtension?: (extension: string) => string | null\n    disabled: boolean\n    multiple?: boolean\n  }\n  onFileUpload: (file: File) => Promise<void>\n  onFileError?: (errMsg: string) => void\n}\n\nconst DEFAULT_INPUT_ID = 'fileInput'\nconst DEFAULT_FILE_SIZE_LIMIT = 1024 * 1024 * 50 // 50 MB\n\nexport function FileUploader({\n  config,\n  onFileUpload,\n  onFileError,\n}: FileUploaderProps) {\n  const [uploading, setUploading] = useState(false)\n  const [remainingFiles, setRemainingFiles] = useState<number>(0)\n\n  const inputId = config?.inputId || DEFAULT_INPUT_ID\n  const fileSizeLimit = config?.fileSizeLimit || DEFAULT_FILE_SIZE_LIMIT\n  const allowedExtensions = config?.allowedExtensions\n  const defaultCheckExtension = (extension: string) => {\n    if (allowedExtensions && !allowedExtensions.includes(extension)) {\n      return `Invalid file type. Please select a file with one of these formats: ${allowedExtensions.join(\n        ','\n      )}`\n    }\n    return null\n  }\n  const checkExtension = config?.checkExtension ?? defaultCheckExtension\n\n  const isFileSizeExceeded = (file: File) => {\n    return file.size > fileSizeLimit\n  }\n\n  const resetInput = () => {\n    const fileInput = document.getElementById(inputId) as HTMLInputElement\n    fileInput.value = ''\n  }\n\n  const onFileChange = async (e: ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || [])\n    if (!files.length) return\n\n    setUploading(true)\n\n    await handleUpload(files)\n\n    resetInput()\n    setUploading(false)\n  }\n\n  const handleUpload = async (files: File[]) => {\n    const onFileUploadError = onFileError || window.alert\n    // Validate files\n    // If multiple files with image or multiple images\n    if (\n      files.length > 1 &&\n      files.some(file => file.type.startsWith('image/'))\n    ) {\n      onFileUploadError('Multiple files with image are not supported')\n      return\n    }\n\n    for (const file of files) {\n      const fileExtension = file.name.split('.').pop() || ''\n      const extensionFileError = checkExtension(fileExtension)\n      if (extensionFileError) {\n        onFileUploadError(extensionFileError)\n        return\n      }\n\n      if (isFileSizeExceeded(file)) {\n        onFileUploadError(\n          `File size exceeded. Limit is ${fileSizeLimit / 1024 / 1024} MB`\n        )\n        return\n      }\n    }\n\n    setRemainingFiles(files.length)\n    for (const file of files) {\n      await onFileUpload(file)\n      setRemainingFiles(prev => prev - 1)\n    }\n    setRemainingFiles(0)\n  }\n\n  return (\n    <div className=\"self-stretch\">\n      <input\n        type=\"file\"\n        id={inputId}\n        style={{ display: 'none' }}\n        onChange={onFileChange}\n        accept={allowedExtensions?.join(',')}\n        disabled={config?.disabled || uploading}\n        multiple={config?.multiple}\n      />\n      <label\n        htmlFor={inputId}\n        className={cn(\n          buttonVariants({ variant: 'secondary', size: 'icon' }),\n          'relative cursor-pointer',\n          uploading && 'opacity-50'\n        )}\n      >\n        {uploading ? (\n          <div className=\"relative flex h-full w-full items-center justify-center\">\n            <Loader2 className=\"absolute h-6 w-6 animate-spin\" />\n            {remainingFiles > 0 && (\n              <span className=\"absolute inset-0 flex items-center justify-center text-xs\">\n                {remainingFiles}\n              </span>\n            )}\n          </div>\n        ) : (\n          <Paperclip className=\"h-4 w-4 -rotate-45\" />\n        )}\n      </label>\n    </div>\n  )\n}\n"],"mappings":"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","names":["import_lucide_react","import_react","React","import_jsx_runtime","DrawerPrimitive","import_react","React","import_jsx_runtime","hljs","import_lucide_react","import_react","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","document","import_jsx_runtime","ReactMarkdown","remarkGfm","remarkMath","rehypeKatex","React","import_jsx_runtime","import_jsx_runtime","import_lucide_react","import_react","CollapsibleTrigger","CollapsibleContent","import_jsx_runtime","CollapsibleTrigger","CollapsibleContent","import_jsx_runtime","import_jsx_runtime","import_react","import_jsx_runtime","document","import_jsx_runtime","import_jsx_runtime","import_lucide_react","import_jsx_runtime","import_lucide_react","import_react","import_jsx_runtime"]}